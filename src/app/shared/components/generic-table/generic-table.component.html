<!-- Mobile‑first, ultra‑responsive elegant exchange table (Tailwind CSS) -->
<div class="relative overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-xl dark:bg-slate-800 dark:border-slate-700">
  
  <!-- subtle gradient glow -->
  <div class="pointer-events-none absolute inset-0 bg-linear-to-br from-indigo-50 via-transparent to-emerald-50 opacity-50 dark:opacity-10"></div>

  <div class="relative">
    
    <!-- Header Section (Title) -->
    <div class="flex items-center justify-between border-b border-gray-100 bg-white/50 px-6 py-4 backdrop-blur-sm dark:bg-slate-800/50 dark:border-slate-700" *ngIf="title">
        <div>
            <h3 class="text-lg font-bold text-gray-900 dark:text-white">{{ title }}</h3>
            <p *ngIf="subtitle" class="text-sm text-gray-500 dark:text-gray-400">{{ subtitle }}</p>
        </div>
        <!-- Optional Actions Slot could go here -->
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex justify-center p-12">
      <span class="loading loading-spinner loading-md text-primary"></span>
    </div>

    <!-- Desktop / Tablet Table -->
    <div class="hidden md:block overflow-x-auto" *ngIf="!isLoading">
      <table class="w-full border-collapse text-left">
        <thead>
          <tr class="bg-linear-to-r from-gray-900 to-gray-800 text-white dark:from-slate-900 dark:to-slate-800">
            <th *ngFor="let col of columns" class="px-6 py-4 text-sm font-medium tracking-wide first:rounded-tl-lg last:rounded-tr-lg">
                {{ col.header }}
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-slate-700">
            <tr *ngFor="let row of data" class="transition hover:bg-gray-50/80 dark:hover:bg-slate-700/30">
                <td *ngFor="let col of columns" class="px-6 py-5">
                    
                    <!-- Content Switch -->
                    <ng-container [ngSwitch]="col.type">
                    
                        <!-- Image Type -->
                        <ng-container *ngSwitchCase="'image'">
                            <div class="flex items-center gap-3">
                                <img [src]="getProperty(row, col.key)" alt="" class="h-9 w-9 rounded-full object-cover bg-gray-100">
                            </div>
                        </ng-container>

                         <!-- Currency Type -->
                        <ng-container *ngSwitchCase="'currency'">
                            <span class="text-lg font-bold text-gray-900 dark:text-white">{{ getProperty(row, col.key) | currency }}</span>
                        </ng-container>

                        <!-- Boolean/Status Type -->
                         <ng-container *ngSwitchCase="'boolean'">
                            <span [class]="getProperty(row, col.key) 
                                ? 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400' 
                                : 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400'"
                                class="inline-flex rounded-full px-3 py-1 text-sm font-medium">
                                {{ getProperty(row, col.key) ? 'Active' : 'Inactive' }}
                            </span>
                        </ng-container>

                        <!-- Date Type -->
                        <ng-container *ngSwitchCase="'date'">
                            <span class="text-sm text-gray-600 dark:text-gray-300">{{ getProperty(row, col.key) | date:'mediumDate' }}</span>
                        </ng-container>

                        <!-- Default Text -->
                        <ng-container *ngSwitchDefault>
                            <!-- Check if it looks like a "badge" content or regular text -->
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-200">{{ getProperty(row, col.key) }}</span>
                        </ng-container>
                    </ng-container>
                </td>
            </tr>
            <!-- Empty State -->
             <tr *ngIf="data.length === 0">
                <td [attr.colspan]="columns.length" class="py-12 text-center text-sm text-gray-500">
                   No data available
                </td>
             </tr>
        </tbody>
      </table>
    </div>

    <!-- Mobile Cards -->
    <div class="space-y-4 p-4 md:hidden" *ngIf="!isLoading">
        <div *ngFor="let row of data" class="rounded-xl border border-gray-100 bg-white p-4 shadow-sm dark:bg-slate-800 dark:border-slate-700">
            <!-- Render first column as header/main item -->
             <div class="mb-4 flex items-center justify-between border-b border-gray-50 pb-3 dark:border-slate-700" *ngIf="columns.length > 0">
                <span class="text-xs font-semibold text-gray-400 uppercase">{{ columns[0].header }}</span>
                <span class="font-bold text-gray-900 dark:text-white">
                     <!-- Quick render for first col -->
                     {{ getProperty(row, columns[0].key) }}
                </span>
             </div>

             <!-- Render rest of columns -->
             <div class="space-y-3">
                 <ng-container *ngFor="let col of columns; let i = index">
                    <div class="flex justify-between items-center" *ngIf="i > 0">
                        <span class="text-xs text-gray-500 max-w-[40%]">{{ col.header }}</span>
                        <div class="text-right">
                             <!-- Reuse logic for mobile content display is tricky without template outlet, doing basic bind -->
                              <ng-container [ngSwitch]="col.type">
                                  <span *ngSwitchCase="'boolean'" [class]="getProperty(row, col.key) ? 'text-emerald-600' : 'text-red-600'" class="text-sm font-medium">
                                    {{ getProperty(row, col.key) ? 'Active' : 'Inactive' }}
                                  </span>
                                  <span *ngSwitchCase="'currency'" class="text-sm font-bold text-gray-900 dark:text-white">
                                    {{ getProperty(row, col.key) | currency }}
                                  </span>
                                  <ng-container *ngSwitchCase="'custom'">
                                    <ng-container *ngTemplateOutlet="col.template; context: { $implicit: row }"></ng-container>
                                  </ng-container>
                                  <span *ngSwitchDefault class="text-sm text-gray-700 dark:text-gray-300">
                                    {{ getProperty(row, col.key) }}
                                  </span>
                              </ng-container>
                        </div>
                    </div>
                 </ng-container>
             </div>
        </div>
         <div *ngIf="data.length === 0" class="text-center py-8 text-gray-500 text-sm">
            No data available
         </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="flex flex-col gap-3 border-t border-gray-100 bg-gray-50 px-6 py-4 sm:flex-row sm:items-center sm:justify-between dark:bg-slate-800/50 dark:border-slate-700">
    <p class="text-sm text-gray-500">
        {{ data.length }} records found
    </p>
    <!-- Pagination or Action could go here -->
  </div>
</div>
